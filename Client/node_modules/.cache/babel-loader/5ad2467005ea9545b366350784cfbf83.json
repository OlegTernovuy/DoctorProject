{"ast":null,"code":"import _regeneratorRuntime from\"/Users/olegternovij/Documents/React/doctor-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/olegternovij/Documents/React/doctor-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/olegternovij/Documents/React/doctor-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{InfoPatients}from\"./InfoPatients.jsx\";import\"./appoint.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var source;export var Appointments=function Appointments(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dateAboutPatients=_useState2[0],setDateAboutPatients=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),IsPending=_useState4[0],setIsPending=_useState4[1];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var responce,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('https://doctor-study-project.herokuapp.com//patients');case 3:responce=_context.sent;if(!(responce.status===200)){_context.next=12;break;}_context.next=7;return responce.json();case 7:data=_context.sent;setIsPending(false);setDateAboutPatients(data);_context.next=14;break;case 12:setDateAboutPatients([]);setIsPending(false);case 14:_context.next=21;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);setDateAboutPatients([]);setIsPending(false);console.log(_context.t0);case 21:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function getData(){return _ref.apply(this,arguments);};}();var deletePat=function deletePat(pat){axios.delete(\"https://62e3d9aa3c89b95396d1ebbd.mockapi.io/Patients/\".concat(pat)).then(function(){getData();console.log(\"Ok\");}).catch(function(err){console.log(err);});};var dat=function dat(){dateAboutPatients.map(function(item){var par=item.date.split(\"-\").join(\"\");var dat=new Date();var days=dat.toISOString().split(\"T\")[0];var today=days.split(\"-\").join(\"\");if(par<today){deletePat(item.id);console.log(\"del\");}});};useEffect(function(){getData();},[]);function scheduleExecution(futureDate,callback){// Set an intermediary timeout at every 1 hour interval, to avoid the\n// 32 bit limitation in setting the timeout delay\nvar maxInterval=60*60*1000;var now=new Date();if(futureDate-now>maxInterval){// Wait for maxInterval milliseconds, but make\n// sure we don't go over the scheduled date\nsetTimeout(function(){scheduleExecution(futureDate);},Math.min(futureDate-now,maxInterval));}else{// Set final timeout\nsetTimeout(callback,futureDate-now);}}var futureDate=new Date();scheduleExecution(futureDate,function(){dat();});var infoPatients=dateAboutPatients.map(function(item){return/*#__PURE__*/_jsx(InfoPatients,{name:item.name,date:item.date,time:item.time,phone:item.phone,reason:item.reason},item._id);});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"containerPatients\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"titleTable\",children:\"\\u0422\\u0430\\u0431\\u043B\\u0438\\u0446\\u044F \\u0437\\u0430\\u043F\\u0438\\u0441\\u0456\\u0432\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoAppo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"titleAppo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"appo\",children:\"\\u0406\\u043C'\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"appo\",style:{color:\"#000\"},children:\"\\u0414\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"appo\",style:{color:\"#000\"},children:\"\\u0427\\u0430\\u0441\"}),/*#__PURE__*/_jsx(\"div\",{className:\"appo\",style:{color:\"#000\"},children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"appo\",style:{color:\"#000\"},children:\"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dataAppo\",children:infoPatients})]}),/*#__PURE__*/_jsx(\"div\",{className:\"downlAppo\"})]})});};","map":{"version":3,"names":["React","useEffect","useState","InfoPatients","axios","source","Appointments","dateAboutPatients","setDateAboutPatients","IsPending","setIsPending","getData","fetch","responce","status","json","data","console","log","deletePat","pat","delete","then","catch","err","dat","map","item","par","date","split","join","Date","days","toISOString","today","id","scheduleExecution","futureDate","callback","maxInterval","now","setTimeout","Math","min","infoPatients","name","time","phone","reason","_id","color"],"sources":["/Users/olegternovij/Documents/React/doctor-main/client/src/pages/onlineAppo/onlineappoint.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { InfoPatients } from \"./InfoPatients.jsx\";\nimport \"./appoint.css\";\nimport axios from \"axios\";\n\n\nlet source;\n\nexport const Appointments = () => {\n  const [dateAboutPatients, setDateAboutPatients] = useState([]);\n  const [IsPending, setIsPending] = useState(false);\n\n  const getData = async () => {\n   //  setIsPending(true);\n   //  source = axios.CancelToken.source();\n   //  axios\n   //    .get(\"https://62e3d9aa3c89b95396d1ebbd.mockapi.io/Patients\", {\n   //      cancelToken: source.token,\n   //    })\n   //    .then((response) => {\n   //      setIsPending(false);\n   //      setDateAboutPatients(response.data);\n   //    })\n   //    .catch((err) => {\n   //      console.log(err);\n   //    });\n\ttry{\n\t\tconst responce = await fetch('https://doctor-study-project.herokuapp.com//patients')\n\n\t\tif(responce.status === 200){\n\t\t\tconst data = await responce.json()\n\t\t\tsetIsPending(false);\n\t\t\tsetDateAboutPatients(data);\n\n\t\t}else{\n\t\t\tsetDateAboutPatients([]);\n\t\t\tsetIsPending(false)\n\t\t}\n\n\t}catch(err){\n\t\tsetDateAboutPatients([]);\n\t\tsetIsPending(false)\n\t\tconsole.log(err)\n\t}\n  };\n\n  const deletePat = (pat) => {\n    axios\n      .delete(`https://62e3d9aa3c89b95396d1ebbd.mockapi.io/Patients/${pat}`)\n      .then(() => {\n        getData();\n        console.log(\"Ok\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const dat = () => {\n    dateAboutPatients.map((item) => {\n      const par = item.date.split(\"-\").join(\"\");\n      let dat = new Date();\n      const days = dat.toISOString().split(\"T\")[0];\n      const today = days.split(\"-\").join(\"\");\n      if (par < today) {\n        deletePat(item.id);\n        console.log(\"del\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  function scheduleExecution(futureDate, callback) {\n    // Set an intermediary timeout at every 1 hour interval, to avoid the\n    // 32 bit limitation in setting the timeout delay\n    var maxInterval = 60 * 60 * 1000;\n    var now = new Date();\n\n    if (futureDate - now > maxInterval) {\n      // Wait for maxInterval milliseconds, but make\n      // sure we don't go over the scheduled date\n      setTimeout(function () {\n        scheduleExecution(futureDate);\n      }, Math.min(futureDate - now, maxInterval));\n    } else {\n      // Set final timeout\n      setTimeout(callback, futureDate - now);\n    }\n  }\n  const futureDate = new Date();\n  scheduleExecution(futureDate, function () {\n    dat();\n  });\n\n\n  const infoPatients = dateAboutPatients.map((item) => {\n    return (\n      <InfoPatients\n        key={item._id}\n        name={item.name}\n        date={item.date}\n        time={item.time}\n        phone={item.phone}\n        reason={item.reason}\n      />\n    );\n  });\n\n  return (\n    <>\n<div className=\"containerPatients\">\n        <div className=\"titleTable\">Таблиця записів</div>\n        <div className=\"infoAppo\">\n          <div className=\"titleAppo\">\n            <div className=\"appo\">Ім'я</div>\n            <div className=\"appo\" style={{ color: \"#000\" }}>\n              Дата\n            </div>\n            <div className=\"appo\" style={{ color: \"#000\" }}>\n              Час\n            </div>\n            <div className=\"appo\" style={{ color: \"#000\" }}>\n              Телефон\n            </div>\n            <div className=\"appo\" style={{ color: \"#000\" }}>\n              Причина\n            </div>\n          </div>\n          <div className=\"dataAppo\">{infoPatients}</div>\n        </div>\n        <div className=\"downlAppo\">\n          {/* <button type=\"button\" onClick={dat}>\n            Оновити записи\n          </button> */}\n        </div>\n      </div>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}