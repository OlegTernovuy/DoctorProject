{"ast":null,"code":"var _jsxFileName = \"/Users/olegternovij/Documents/React/doctor-main/client/src/pages/onlineAppo/onlineappoint.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { InfoPatients } from \"./InfoPatients.jsx\";\nimport \"./appoint.css\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet source;\nexport const Appointments = () => {\n  _s();\n\n  const [dateAboutPatients, setDateAboutPatients] = useState([]);\n  const [IsPending, setIsPending] = useState(false);\n\n  const getData = async () => {\n    //  setIsPending(true);\n    //  source = axios.CancelToken.source();\n    //  axios\n    //    .get(\"https://62e3d9aa3c89b95396d1ebbd.mockapi.io/Patients\", {\n    //      cancelToken: source.token,\n    //    })\n    //    .then((response) => {\n    //      setIsPending(false);\n    //      setDateAboutPatients(response.data);\n    //    })\n    //    .catch((err) => {\n    //      console.log(err);\n    //    });\n    try {\n      const responce = await fetch('https://doctor-study-project.herokuapp.com/patients');\n\n      if (responce.status === 200) {\n        const data = await responce.json();\n        setIsPending(false);\n        setDateAboutPatients(data);\n      } else {\n        setDateAboutPatients([]);\n        setIsPending(false);\n      }\n    } catch (err) {\n      setDateAboutPatients([]);\n      setIsPending(false);\n      console.log(err);\n    }\n  }; // const deletePat = (pat) => {\n  //   axios\n  //     .delete(`https://62e3d9aa3c89b95396d1ebbd.mockapi.io/Patients/${pat}`)\n  //     .then(() => {\n  //       getData();\n  //       console.log(\"Ok\");\n  //     })\n  //     .catch((err) => {\n  //       console.log(err);\n  //     });\n  // };\n\n\n  const deletePat = async pat => {\n    try {\n      setIsPending(true);\n      const responce = await fetch('https://doctor-study-project.herokuapp.com/patients/' + pat._id, {\n        method: 'DELETE'\n      });\n\n      if (responce.status === 200) {\n        getData();\n      } else {\n        setIsPending(false);\n      }\n    } catch (err) {\n      setIsPending(false);\n      console.log(err);\n    }\n  };\n\n  const dat = () => {\n    dateAboutPatients.map(item => {\n      const par = item.date.split(\"-\").join(\"\");\n      let dat = new Date();\n      const days = dat.toISOString().split(\"T\")[0];\n      const today = days.split(\"-\").join(\"\");\n\n      if (par < today) {\n        deletePat(item.id);\n        console.log(\"del\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  function scheduleExecution(futureDate, callback) {\n    // Set an intermediary timeout at every 1 hour interval, to avoid the\n    // 32 bit limitation in setting the timeout delay\n    var maxInterval = 60 * 60 * 1000;\n    var now = new Date();\n\n    if (futureDate - now > maxInterval) {\n      // Wait for maxInterval milliseconds, but make\n      // sure we don't go over the scheduled date\n      setTimeout(function () {\n        scheduleExecution(futureDate);\n      }, Math.min(futureDate - now, maxInterval));\n    } else {\n      // Set final timeout\n      setTimeout(callback, futureDate - now);\n    }\n  }\n\n  const futureDate = new Date();\n  scheduleExecution(futureDate, function () {\n    dat();\n  });\n  const infoPatients = dateAboutPatients.map(item => {\n    return /*#__PURE__*/_jsxDEV(InfoPatients, {\n      name: item.name,\n      date: item.date,\n      time: item.time,\n      phone: item.phone,\n      reason: item.reason\n    }, item._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"containerPatients\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"titleTable\",\n        children: \"\\u0422\\u0430\\u0431\\u043B\\u0438\\u0446\\u044F \\u0437\\u0430\\u043F\\u0438\\u0441\\u0456\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"infoAppo\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"titleAppo\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"appo\",\n            children: \"\\u0406\\u043C'\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"appo\",\n            style: {\n              color: \"#000\"\n            },\n            children: \"\\u0414\\u0430\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"appo\",\n            style: {\n              color: \"#000\"\n            },\n            children: \"\\u0427\\u0430\\u0441\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"appo\",\n            style: {\n              color: \"#000\"\n            },\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"appo\",\n            style: {\n              color: \"#000\"\n            },\n            children: \"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dataAppo\",\n          children: infoPatients\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"downlAppo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 1\n    }, this)\n  }, void 0, false);\n};\n\n_s(Appointments, \"vDazs8Egvtk6GicHafgB2fWMnTg=\");\n\n_c = Appointments;\n\nvar _c;\n\n$RefreshReg$(_c, \"Appointments\");","map":{"version":3,"names":["React","useEffect","useState","InfoPatients","axios","source","Appointments","dateAboutPatients","setDateAboutPatients","IsPending","setIsPending","getData","responce","fetch","status","data","json","err","console","log","deletePat","pat","_id","method","dat","map","item","par","date","split","join","Date","days","toISOString","today","id","scheduleExecution","futureDate","callback","maxInterval","now","setTimeout","Math","min","infoPatients","name","time","phone","reason","color"],"sources":["/Users/olegternovij/Documents/React/doctor-main/client/src/pages/onlineAppo/onlineappoint.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { InfoPatients } from \"./InfoPatients.jsx\";\nimport \"./appoint.css\";\nimport axios from \"axios\";\n\n\nlet source;\n\nexport const Appointments = () => {\n  const [dateAboutPatients, setDateAboutPatients] = useState([]);\n  const [IsPending, setIsPending] = useState(false);\n\n  const getData = async () => {\n   //  setIsPending(true);\n   //  source = axios.CancelToken.source();\n   //  axios\n   //    .get(\"https://62e3d9aa3c89b95396d1ebbd.mockapi.io/Patients\", {\n   //      cancelToken: source.token,\n   //    })\n   //    .then((response) => {\n   //      setIsPending(false);\n   //      setDateAboutPatients(response.data);\n   //    })\n   //    .catch((err) => {\n   //      console.log(err);\n   //    });\n\ttry{\n\t\tconst responce = await fetch('https://doctor-study-project.herokuapp.com/patients')\n\n\t\tif(responce.status === 200){\n\t\t\tconst data = await responce.json()\n\t\t\tsetIsPending(false);\n\t\t\tsetDateAboutPatients(data);\n\n\t\t}else{\n\t\t\tsetDateAboutPatients([]);\n\t\t\tsetIsPending(false)\n\t\t}\n\n\t}catch(err){\n\t\tsetDateAboutPatients([]);\n\t\tsetIsPending(false)\n\t\tconsole.log(err)\n\t}\n  };\n\n  // const deletePat = (pat) => {\n  //   axios\n  //     .delete(`https://62e3d9aa3c89b95396d1ebbd.mockapi.io/Patients/${pat}`)\n  //     .then(() => {\n  //       getData();\n  //       console.log(\"Ok\");\n  //     })\n  //     .catch((err) => {\n  //       console.log(err);\n  //     });\n  // };\n\n  const deletePat = async (pat) => {\n\n     try{\n       setIsPending(true)\n       const responce = await fetch('https://doctor-study-project.herokuapp.com/patients/' + pat._id,{\n         method:'DELETE'\n       })\n       if(responce.status === 200){\n         getData()\n       }else{\n         setIsPending(false)\n       }\n \n     }catch(err){\n       setIsPending(false)\n       console.log(err);\n     }\n   };\n\n  const dat = () => {\n    dateAboutPatients.map((item) => {\n      const par = item.date.split(\"-\").join(\"\");\n      let dat = new Date();\n      const days = dat.toISOString().split(\"T\")[0];\n      const today = days.split(\"-\").join(\"\");\n      if (par < today) {\n        deletePat(item.id);\n        console.log(\"del\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  function scheduleExecution(futureDate, callback) {\n    // Set an intermediary timeout at every 1 hour interval, to avoid the\n    // 32 bit limitation in setting the timeout delay\n    var maxInterval = 60 * 60 * 1000;\n    var now = new Date();\n\n    if (futureDate - now > maxInterval) {\n      // Wait for maxInterval milliseconds, but make\n      // sure we don't go over the scheduled date\n      setTimeout(function () {\n        scheduleExecution(futureDate);\n      }, Math.min(futureDate - now, maxInterval));\n    } else {\n      // Set final timeout\n      setTimeout(callback, futureDate - now);\n    }\n  }\n  const futureDate = new Date();\n  scheduleExecution(futureDate, function () {\n    dat();\n  });\n\n\n  const infoPatients = dateAboutPatients.map((item) => {\n    return (\n      <InfoPatients\n        key={item._id}\n        name={item.name}\n        date={item.date}\n        time={item.time}\n        phone={item.phone}\n        reason={item.reason}\n      />\n    );\n  });\n\n  return (\n    <>\n<div className=\"containerPatients\">\n        <div className=\"titleTable\">Таблиця записів</div>\n        <div className=\"infoAppo\">\n          <div className=\"titleAppo\">\n            <div className=\"appo\">Ім'я</div>\n            <div className=\"appo\" style={{ color: \"#000\" }}>\n              Дата\n            </div>\n            <div className=\"appo\" style={{ color: \"#000\" }}>\n              Час\n            </div>\n            <div className=\"appo\" style={{ color: \"#000\" }}>\n              Телефон\n            </div>\n            <div className=\"appo\" style={{ color: \"#000\" }}>\n              Причина\n            </div>\n          </div>\n          <div className=\"dataAppo\">{infoPatients}</div>\n        </div>\n        <div className=\"downlAppo\">\n          {/* <button type=\"button\" onClick={dat}>\n            Оновити записи\n          </button> */}\n        </div>\n      </div>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}